<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Black Room - Video</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  
  <style>
    *{box-sizing:border-box;margin:0;padding:0}body{font-family:'Montserrat',sans-serif;background:#0f0f0f;color:#fff;line-height:1.5}a{text-decoration:none;color:#fff;transition:color .3s ease}a:hover{color:#e74c3c}.sticky-nav{position:sticky;top:0;background:rgba(15,15,15,.9);display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;border-bottom:1px solid #333;z-index:999}.nav-links{display:flex;align-items:center;gap:1.5rem}.nav-links a{text-transform:uppercase;color:#bbb;font-size:.9rem;letter-spacing:.5px}.nav-links a:hover{color:#fff}.auth-buttons{display:flex;align-items:center;gap:1rem}.nav-btn{background:#e74c3c;color:#fff;font-weight:600;font-size:.85rem;padding:.6rem 1rem;border-radius:3px;transition:background .3s}.nav-btn:hover{background:#c0392b}.calendar-icon{color:#e74c3c;font-size:1.2rem;transition:color .3s;cursor:pointer}.calendar-icon:hover{color:#fff}.search-container{position:relative}.search-icon{color:#e74c3c;transition:color .3s;cursor:pointer;font-size:1rem}.search-icon:hover{color:#fff}.search-bar{position:absolute;top:110%;right:0;background:#1b1b1b;border:1px solid #444;border-radius:4px;padding:10px;display:none}.search-bar input{width:200px;padding:8px;border:none;border-radius:3px;background:#333;color:#fff;outline:none;font-size:.9rem}.modal{display:none;position:fixed;inset:0;background-color:rgba(0,0,0,.8);z-index:2000;justify-content:center;align-items:center;padding:1rem}.modal-content{background:#1b1b1b;padding:2rem;border-radius:4px;width:300px;text-align:center;position:relative}.close-btn{position:absolute;top:10px;right:10px;font-size:1.5rem;font-weight:bold;color:#fff;cursor:pointer;transition:color .3s}.close-btn:hover{color:#e74c3c}.auth-form{display:none;flex-direction:column;gap:1rem}.auth-form h3{margin-top:0;font-weight:600;font-size:1.2rem;margin-bottom:1rem;color:#e74c3c}.auth-form input{padding:.8rem;border:1px solid #444;border-radius:3px;background:#333;color:#fff;outline:none;font-size:.9rem}.auth-form button{padding:.8rem;background:#e74c3c;border:none;border-radius:3px;color:#fff;font-weight:600;font-size:.9rem;cursor:pointer;transition:background .3s}.auth-form button:hover{background:#c0392b}.main-content{display:flex;flex-wrap:wrap;gap:2rem;padding:2rem}.video-section{flex:1 1 600px;min-width:300px}.video-player{width:100%;height:0;padding-bottom:56.25%;position:relative;background:#111}.video-player iframe{position:absolute;width:100%;height:100%;left:0;top:0;border:none}.video-details{margin-top:1rem}.video-details h2{font-size:1.5rem;font-weight:700;margin-bottom:.5rem}.video-details .genre{font-size:.95rem;color:#ccc;margin-bottom:.75rem}.video-details .description{font-size:.9rem;color:#aaa;line-height:1.4}.suggested-section{flex:0 1 350px;min-width:280px}.suggested-title{font-size:1.2rem;font-weight:700;margin-bottom:1rem;border-bottom:1px solid #333;padding-bottom:.5rem;text-transform:uppercase}.suggested-list{display:flex;flex-direction:column;gap:1rem}.suggested-card{display:flex;gap:.75rem;background:#111;border-radius:4px;overflow:hidden;transition:background .3s}.suggested-card:hover{background:#1b1b1b}.suggested-card img{width:120px;height:70px;object-fit:cover;flex-shrink:0}.suggested-info{padding:.5rem 0;display:flex;flex-direction:column;justify-content:center}.suggested-info h4{font-size:.95rem;font-weight:600;margin-bottom:.25rem}.suggested-info span{font-size:.8rem;color:#ccc}footer{border-top:1px solid #333;padding:2rem;text-align:center;font-size:.9rem;color:#aaa}@media (max-width:980px){.main-content{flex-direction:column}.video-section,.suggested-section{flex:1 1 auto}}
  </style>
</head>
<body>
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="close-modal">×</span>
      <form id="login-form" class="auth-form">
        <h3>Login</h3>
        <input type="email" id="login-email" placeholder="Email" required>
        <input type="password" id="login-password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>
      <form id="signup-form" class="auth-form">
        <h3>Sign Up</h3>
        <input type="text" id="signup-name" placeholder="Name" required>
        <input type="email" id="signup-email" placeholder="Email" required>
        <input type="password" id="signup-password" placeholder="Password" required>
        <button type="submit">Sign Up</button>
      </form>
    </div>
  </div>

  <nav class="sticky-nav">
    <div class="nav-links">
      <a href="index.html">Inicio</a>
      <a href="videos.html">Videos</a>
      <a href="events.html">Events</a>
      <a href="gallery.html">Gallery</a>
      <a href="shop.html">Shop</a>
      <a href="#contact">Contact</a>
    </div>
    <div class="auth-buttons">
      <a href="calendar.html" class="calendar-icon" id="calendar-icon"><i class="fas fa-calendar-alt"></i></a>
      <div class="search-container">
        <span class="search-icon" id="search-icon"><i class="fas fa-search"></i></span>
        <div class="search-bar" id="search-bar">
          <input type="text" id="search-input" placeholder="Buscar videos...">
        </div>
      </div>
      <a href="#" id="login-btn" class="nav-btn">Login</a>
      <a href="#" id="signup-btn" class="nav-btn">Sign Up</a>
    </div>
  </nav>

  <div class="main-content">
    <div class="video-section">
      <div class="video-player" id="videoPlayer"></div>
      <div class="video-details">
        <h2 id="videoArtist">Artista</h2>
        <div class="genre" id="videoGenre">Género</div>
        <div class="description"><p id="videoDescription">Disfruta de este set exclusivo transmitido en vivo desde The Black Room.</p></div>
      </div>
    </div>
    <aside class="suggested-section">
      <h3 class="suggested-title">Sugerencias</h3>
      <div class="suggested-list" id="suggestedVideos"></div>
    </aside>
  </div>

  <footer>
    <p>© 2024 The Black Room. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Modal Logic
      const modal = document.getElementById('auth-modal');
      const closeModal = document.getElementById('close-modal');
      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');

      document.getElementById('login-btn').addEventListener('click', (e) => {
        e.preventDefault();
        modal.style.display = 'flex';
        loginForm.style.display = 'flex';
        signupForm.style.display = 'none';
      });

      document.getElementById('signup-btn').addEventListener('click', (e) => {
        e.preventDefault();
        modal.style.display = 'flex';
        signupForm.style.display = 'flex';
        loginForm.style.display = 'none';
      });

      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      window.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
        }
      });

      // Video Player Logic
      const API_KEY = 'AIzaSyAFef4gOEKk1CWFd-M9jZ_5MLdt9HTFjCw';
      
      // Primero intentamos obtener el video desde localStorage (desde videos.html)
      const selectedVideo = JSON.parse(localStorage.getItem('selectedVideo'));
      let videoId = selectedVideo ? selectedVideo.id : null;

      // Si no hay video en localStorage, usamos el parámetro de la URL como fallback
      if (!videoId) {
        const urlParams = new URLSearchParams(window.location.search);
        videoId = urlParams.get('videoId') || 'Lr_FzTxMGRY'; // Default video
      }

      const videoPlayerDiv = document.getElementById('videoPlayer');
      videoPlayerDiv.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" allowfullscreen></iframe>`;

      // Fetch Video Details
      async function fetchVideoDetails(videoId) {
        const url = `https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${API_KEY}`;
        try {
          const response = await fetch(url);
          const data = await response.json();
          return {
            title: data.items[0].snippet.title || 'Sin título',
            description: data.items[0].snippet.description || 'Sin descripción'
          };
        } catch (error) {
          console.error('Error al obtener detalles del video:', error);
          return { title: 'Error', description: 'Error al cargar descripción' };
        }
      }

      // Actualizar detalles del video actual
      async function updateVideoDetails() {
        const details = await fetchVideoDetails(videoId);
        document.getElementById('videoArtist').textContent = details.title;
        document.getElementById('videoGenre').textContent = selectedVideo ? selectedVideo.genre : 'Género no especificado';
        document.getElementById('videoDescription').textContent = details.description;
      }
      updateVideoDetails();

      // Fetch Videos from videos.html
      async function fetchVideosFromVideosHtml() {
        try {
          const response = await fetch('videos.html');
          const html = await response.text();
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const videoCards = doc.querySelectorAll('.video-card');
          return Array.from(videoCards).map(card => ({
            id: card.getAttribute('data-id'),
            title: card.getAttribute('data-title'),
            genre: card.getAttribute('data-genre')
          }));
        } catch (error) {
          console.error('Error fetching videos from videos.html:', error);
          return [];
        }
      }

      // Get Random Videos excluding the current one
      function getRandomVideos(videoList, currentVideoId, count = 5) {
        const filteredList = videoList.filter(video => video.id !== currentVideoId);
        const shuffled = filteredList.sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
      }

      // Load Suggested Videos
      async function loadSuggestedVideos() {
        const allVideos = await fetchVideosFromVideosHtml();
        const suggestedVideos = getRandomVideos(allVideos, videoId);
        
        const suggestedList = document.getElementById('suggestedVideos');
        suggestedList.innerHTML = '';

        for (const video of suggestedVideos) {
          const details = await fetchVideoDetails(video.id);
          const card = document.createElement('div');
          card.classList.add('suggested-card');
          card.innerHTML = `
            <a href="video.html?videoId=${video.id}" onclick="selectVideo('${video.id}', '${video.title}', '${video.genre}')">
              <img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${details.title}">
            </a>
            <div class="suggested-info">
              <h4>${details.title}</h4>
              <span>${video.genre}</span>
            </div>
          `;
          suggestedList.appendChild(card);
        }
      }

      // Function to handle video selection
      function selectVideo(id, title, genre) {
        localStorage.setItem('selectedVideo', JSON.stringify({ id, title, genre }));
      }

      loadSuggestedVideos();
    });
  </script>
</body>
</html>

AIzaSyAFef4gOEKk1CWFd-M9jZ_5MLdt9HTFjCw
